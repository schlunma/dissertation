%=============================================================================%
%                                Dissertation                                 %
%                               Manuel Schlund                                %
%                                  (c) 2020                                   %
%=============================================================================%
%                                  Settings                                   %
%=============================================================================%



% Use roman font for headings
\setkomafont{disposition}{\bfseries}

% Prevent overfull hboxes
\emergencystretch = 1em

% Allow additional vertical stretch to remove underfull vboxes
\makeatletter
\def\@textbottom{\vskip \z@ \@plus 12pt}
\let\@texttop\relax
\makeatother

% Remove widows and orphans
\clubpenalty = 10000
\displaywidowpenalty = 10000
\widowpenalty = 10000

% Footer
\cfoot*{\pagemark}
\ofoot*{}

% Footnotes
\renewcommand*{\thefootnote}{\fnsymbol{footnote}}

% Colors
\colorlet{BrownRed}{red!50!black}

% New theorem
\newtheorem{definition}{Definition}[chapter]
\theoremstyle{definition}

% Absolute values
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}

% Biblatex
\newcommand*{\boldname}[3]{% Make my name bold in list of references
  \def\lastname{#1}%
  \def\firstname{#2}%
  \def\firstinit{#3}%
}
\renewcommand{\mkbibnamegiven}[1]{%
  \ifboolexpr{
    (test {\ifdefequal{\firstname}{\namepartgiven}} or
     test {\ifdefequal{\firstinit}{\namepartgiven}}) and
    test {\ifdefequal{\lastname}{\namepartfamily}}
  }{\mkbibbold{#1}}{#1}%
}
\renewcommand{\mkbibnamefamily}[1]{%
  \ifboolexpr{
    (test {\ifdefequal{\firstname}{\namepartgiven}} or
     test {\ifdefequal{\firstinit}{\namepartgiven}}) and
    test {\ifdefequal{\lastname}{\namepartfamily}}
  }{\mkbibbold{#1}}{#1}%
}

% Reduce space before and after equations
% This removes issues of setspace package that result in many underfull vboxes
\setdisplayskipstretch{}

% Acronyms
\makeatletter
\AtBeginDocument{% Do not use hyperref color for links
  \renewcommand*{\AC@hyperlink}[2]{%
    \begingroup%
    \hypersetup{hidelinks}%
    \hyperlink{#1}{#2}%
    \endgroup%
  }%
}
\newcommand*{\org@overidelabel}{} % No warning about multiply-defined labels
\let\org@overridelabel\@verridelabel
\renewcommand*{\@verridelabel}[1]{%
  \@bsphack%
  \protected@write\@auxout{}{\string\AC@undonewlabel{#1@cref}}%
  \org@overridelabel{#1}%
  \@esphack%
}%
\makeatother
\renewcommand{\aclabelfont}[1]{\textrm{#1}} % Font for acronyms in list

% Hyperref
\hypersetup{
  linktocpage=true,
  colorlinks=true,
  allcolors=BrownRed,
  pdftitle=\TheTitle{},
  pdfsubject=\TheThesis{},
  pdfauthor=\TheAuthor{},
  pdfkeywords={
    \TheThesis{},
    Climate Modelling,
    Climate Sensitivity,
    Machine Learning
  },
  pdfcreator=pdfLaTeX,
}

% Cleveref
\crefname{enumi}{step}{steps} % Use "step" when referencing an enum item
\newcommand{\crefrangeconjunction}{--}

% PDF version of document
\pdfminorversion = 7